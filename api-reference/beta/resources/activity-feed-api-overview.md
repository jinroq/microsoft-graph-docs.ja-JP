---
title: アクティビティフィード REST API を使用する
description: 'Microsoft Graph のアクティビティフィード API を使用して、デバイスとプラットフォーム間でユーザーのアクティビティを再開できます。 アクティビティフィード API 要求は、委任されたアクセス許可とユーザーアクティビティのアクセス許可を使用してユーザーの代理として実行されます。これは、個人用アカウントまたは職場アカウントまたは学校アカウントで使用できます。 '
localization_priority: Normal
ms.prod: project-rome
ms.openlocfilehash: 12f4160a551895c4042a0e8577e28e73692b4265
ms.sourcegitcommit: 014eb3944306948edbb6560dbe689816a168c4f7
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/26/2019
ms.locfileid: "33339100"
---
# <a name="use-the-activity-feed-rest-api"></a><span data-ttu-id="ac0fc-104">アクティビティフィード REST API を使用する</span><span class="sxs-lookup"><span data-stu-id="ac0fc-104">Use the activity feed REST API</span></span>

[!INCLUDE [beta-disclaimer](../../includes/beta-disclaimer.md)]


<span data-ttu-id="ac0fc-105">Microsoft Graph のアクティビティフィード API を使用して、デバイスとプラットフォーム間でユーザーのアクティビティを再開できます。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-105">You can use the activity feed API in Microsoft Graph to resume a user's activity across devices and platforms.</span></span> <span data-ttu-id="ac0fc-106">アクティビティフィード API 要求は、委任された[アクセス許可](/graph/permissions-reference#delegated-permissions-application-permissions-and-effective-permissions)と[ユーザーアクティビティのアクセス許可](/graph/permissions-reference)を使用してユーザーの代理として実行されます。これは、個人用アカウントまたは職場アカウントまたは学校アカウントで使用できます。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-106">Activity feed API requests are performed on behalf of a user via [delegated permissions](/graph/permissions-reference#delegated-permissions-application-permissions-and-effective-permissions) and the [user activity permission](/graph/permissions-reference), which can be used with either personal or work and school accounts.</span></span> 

<span data-ttu-id="ac0fc-107">ユーザーアクティビティは、[アクティビティ](https://developer.microsoft.com/graph/docs/api-reference/beta/resources/projectrome_activity)リソースによって表され、コレクションの me/アクティビティで表される時間ベースのフィードに整理されます。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-107">User activities are represented by the [activity](https://developer.microsoft.com/graph/docs/api-reference/beta/resources/projectrome_activity) resource and are organized in a time-based feed represented by the collection me/activities.</span></span> 
<!-- Add missing content.
Each activity represents a unique... 
-->
## <a name="what-makes-a-great-user-activity"></a><span data-ttu-id="ac0fc-108">非常に高いユーザーアクティビティになるのは、どのようなものですか。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-108">What makes a great user activity?</span></span>

<span data-ttu-id="ac0fc-109">ユーザーアクティビティはアプリを起動するだけではなく、アプリ内の特定のコンテンツに対する深いリンクです。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-109">User activities don’t just launch apps — they are deep links into specific content within your app.</span></span> <span data-ttu-id="ac0fc-110">作成したユーザーアクティビティは、独自のアプリで使用するだけではなく、Cortana と Windows タイムラインにも表示されます。これにより、アプリの再利用が向上し、ユーザーが複数のデバイスでアプリを引き続き使用することが容易になります。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-110">The user activities you create can not only be used in your own app, but will also appear in Cortana and Windows Timeline — driving more app reengagement and making it easier for your users to continue using your app across multiple devices.</span></span>  

### <a name="what-should-become-an-activity"></a><span data-ttu-id="ac0fc-111">アクティビティになる必要があるもの</span><span class="sxs-lookup"><span data-stu-id="ac0fc-111">What should become an activity?</span></span> 

<span data-ttu-id="ac0fc-112">すべてのアプリが異なるため、アプリケーション内のアクションをユーザーアクティビティにマップするための最善の方法を、各アプリ開発者が理解している必要があります。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-112">Because every app is different, it's up to each app developer to understand the best way to map actions within your application to user activities.</span></span> <span data-ttu-id="ac0fc-113">たとえば、ゲームは各キャンペーンに対してアクティビティを作成し、ドキュメント作成アプリは固有のドキュメントごとにアクティビティを作成し、基幹業務アプリは各ワークフローのアクティビティを作成する場合があります。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-113">For example, games might create an activity for each campaign, document authoring apps might create an activity for each unique document, and line-of-business apps might create an activity for each workflow.</span></span> 

<span data-ttu-id="ac0fc-114">アプリで activitites を定義するときに、次のガイドラインを適用します。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-114">Apply the following guidlines as you define activitites in your app:</span></span>

<span data-ttu-id="ac0fc-115">**実行:** 関連するユーザーアクションのグループに対して1つのアクティビティを記録します。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-115">**DO:** Record a single activity for a group of related user actions.</span></span> <span data-ttu-id="ac0fc-116">アプリケーションが関連するコンテンツのシーケンスに使用されている場合は、契約セッション全体に対して1つのアクティビティを記録することが適切な場合があります。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-116">If your application is used for a sequence of related content, it probably makes sense to record a single activity for the entire engagement session.</span></span>  

<span data-ttu-id="ac0fc-117">*再生リストのシナリオ:* これは、音楽の再生リストまたはテレビ番組に特に関連しています。1つのユーザーアクティビティを更新して、進行状況を表示することができます。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-117">*Playlist scenarios:* This is especially relevant for music playlists or TV shows — a single user activity can be updated to show your progress.</span></span> <span data-ttu-id="ac0fc-118">この例では、複数の日数または数週間にわたる契約期間を表す複数の[履歴項目](https://developer.microsoft.com/graph/docs/api-reference/beta/resources/projectrome_historyitem)を持つ1つのユーザーアクティビティがあります。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-118">In this case, you will have a single user activity with multiple [history items](https://developer.microsoft.com/graph/docs/api-reference/beta/resources/projectrome_historyitem) representing periods of engagement across multiple days or weeks.</span></span>  

<span data-ttu-id="ac0fc-119">**実行:** ユーザーデータをクラウドに格納します。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-119">**DO:** Store user data to the cloud.</span></span> <span data-ttu-id="ac0fc-120">クロスデバイスアクティビティをサポートする必要がある場合は、このアクティビティを再利用するために必要なコンテンツがクラウドの場所に格納されていることを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-120">If you want to support cross-device activities, you need to make sure the content required to reengage this activity is stored to a cloud location.</span></span> <span data-ttu-id="ac0fc-121">たとえば、ユーザーがドキュメントを編集するたびにアクティビティを発行する場合は、クロスデバイス再契約を有効にするために、ドキュメントをユーザーのデバイス上でローカルに保存するのではなく、クラウドに保存する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-121">For example, if you publish an activity each time a user edits a document, the document should be stored in the cloud as opposed to locally on the user's device in order to enable cross-device reengagement.</span></span>  

<span data-ttu-id="ac0fc-122">**次の操作は行わないでください。** ユーザーが今後再開する必要がない操作のユーザーアクティビティを作成します。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-122">**DO NOT:** Create a user activity for actions that users do not need to resume in the future.</span></span> <span data-ttu-id="ac0fc-123">アプリケーションを使用して、状態を保持しない簡単なワンタイム操作を実行する場合、今後はユーザーアクティビティを記述する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-123">If your application is used to complete simple, one-time operations that do not persist status for you to track in the future, you probably do not need to write a user activity.</span></span> 

<span data-ttu-id="ac0fc-124">ユーザーアクティビティが Windows タイムラインに表示される場合でも、バージョン管理ツールとして設計されていませんが、ドキュメントベースのアクティビティを選択すると、そのドキュメントの最新バージョン (他のユーザーによる変更を含む) が常に表示されるようになります。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-124">To be clear, even though user activities appear in Windows Timeline, this is not designed as a versioning tool — choosing a document-based activity should always show the latest version of that document (including changes that were made by another user.)</span></span>

<span data-ttu-id="ac0fc-125">\**次の操作は行わないでください。\*\*\*他のユーザー*によって完了したアクションのユーザーアクティビティを作成します。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-125">**DO NOT:** Create a user activity for actions completed by *other users*.</span></span> <span data-ttu-id="ac0fc-126">ユーザーがメッセージを送信したり、アプリ内でユーザーに @mentions したりした場合は、新しいアクティビティを作成しないでください。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-126">If someone sends the user a message, or @mentions the user within your app, you should not write a new activity.</span></span> <span data-ttu-id="ac0fc-127">これらの相互作用は、提示された通知により提供されます。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-127">These interactions are better served by surfacing notifications.</span></span>  

<span data-ttu-id="ac0fc-128">*グループ作業のシナリオ:* 複数のユーザーが同じ操作 (Word 文書など) に対して作業を行っている場合、最後に編集した後に別のユーザーがドキュメントを変更した可能性があります。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-128">*Collaboration scenarios:* If multiple people are working on the same activity (such as a Word document), there will be cases when another user has made changes to the document after you last edited it.</span></span> <span data-ttu-id="ac0fc-129">この場合、アプリ開発者は、ドキュメントに加えられた変更を反映するために、アクティビティ内のビジュアル要素を更新する必要があります。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-129">In this case, app developers might want to update the visual elements in the activity to reflect changes made to the document.</span></span> <span data-ttu-id="ac0fc-130">これを行うために、アプリは新しい履歴アイテムを作成せずに既存のアクティビティを更新する場合があります。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-130">To do this, the app might update the existing activity without creating a new history item.</span></span> 

><span data-ttu-id="ac0fc-131">**注:** web アプリケーションのアクティビティを発行している場合は、アクティビティごと`activationURL` `fallbackURL`にとの両方を含めることが重要です。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-131">**Note:** If you're publishing activities for a web application, it's important to include both an `activationURL` and a `fallbackURL` for each of your activities.</span></span> <span data-ttu-id="ac0fc-132">アクティビティは、Windows タイムラインのような Microsoft エクスペリエンスから期待したとおりにユーザーをアプリに戻します。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-132">The activities will launch the user back into your app as expected from Microsoft experiences like Windows Timeline.</span></span> 

## <a name="app-interaction-patterns-and-user-activities"></a><span data-ttu-id="ac0fc-133">アプリの相互作用パターンとユーザーアクティビティ</span><span class="sxs-lookup"><span data-stu-id="ac0fc-133">App interaction patterns and user activities</span></span> 
<span data-ttu-id="ac0fc-134">作成するユーザーアクティビティは、アプリの対話パターンに応じて異なります。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-134">The user activities that you create will vary based on the interaction pattern of your app.</span></span> <span data-ttu-id="ac0fc-135">すべてのアプリは異なりますが、ほとんどは次の相互作用パターンのいずれかに分類されます。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-135">While every app is different, most will fall into one of the following interaction patterns:</span></span> 

* <span data-ttu-id="ac0fc-136">**ドキュメントベースのアプリ**-使用期間を反映した1つまたは複数の履歴レコードを含む1つのアクティビティをドキュメントごとに作成します。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-136">**Document-based apps** — Create one activity per document with one or more history records reflecting periods of use.</span></span> <span data-ttu-id="ac0fc-137">ドキュメントが変更されたときに、アクティビティカードを更新することが重要です。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-137">It is important to update your activity card as changes are made to the document.</span></span> 
* <span data-ttu-id="ac0fc-138">**メディア再生アプリ**—再生リスト、プログラム、スタンドアロンコンテンツなどのコンテンツの論理グループごとに1つのアクティビティを作成します。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-138">**Media playback apps** — Create one activity per logical grouping of content such as a playlist, program, or standalone content.</span></span> 
* <span data-ttu-id="ac0fc-139">**ゲーム**-セーブされたゲームまたは world ごとに1つのアクティビティを作成します。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-139">**Games** — Create one activity for each saved game or world.</span></span> <span data-ttu-id="ac0fc-140">ゲームでサポートされているレベルのシーケンスが1つだけの場合は、時間の経過とともに同じアクティビティを書き込むことができますが、最新の進捗状況やアチーブメントを表示するようにカードを更新する必要がある場合もあります。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-140">If your game supports only a single sequence of levels, you can write the same activity over time, although you might want to update your card to show your latest progress or achievements.</span></span> 
* <span data-ttu-id="ac0fc-141">**ユーティリティアプリ**: ユーザーが再開することをアプリ内に何もない場合は、アクティビティを発行しないでください。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-141">**Utility apps** — If there is nothing within your app that users would want to resume, you should not publish activities.</span></span> <span data-ttu-id="ac0fc-142">良い例として、電卓などの単純な単一用途のアプリがあります。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-142">A good example is a simple single-purpose app like calculator.</span></span> 
* <span data-ttu-id="ac0fc-143">**基幹業務アプリ**—単純なタスクやワークフローを管理するための多数のアプリがあります。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-143">**Line-of-business apps** — Many apps exist for managing simple tasks or workflows.</span></span> <span data-ttu-id="ac0fc-144">アプリを通じてアクセスする個別のワークフローごとに1つのアクティビティを作成します。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-144">Create one activity for each separate workflow accessed through your app.</span></span> <span data-ttu-id="ac0fc-145">たとえば、各経費報告書は個別のアクティビティであるため、そのアクティビティをクリックして承認されたかどうかを確認したい場合があります。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-145">For example, each expense report would be a separate activity, because you might want to click that activity to see if it was approved.</span></span>

<span data-ttu-id="ac0fc-146">*一部の複雑なアプリには、複数の相互作用パターンが含まれています。アプリによって処理されるさまざまなシナリオについて、さまざまなユーザーアクティビティ作成パターンに従うことをお勧めします。*</span><span class="sxs-lookup"><span data-stu-id="ac0fc-146">*Some complex apps include multiple interaction patterns. You might want to follow different user activity creation patterns for different scenarios handled by your app.*</span></span>

<!-- Add content or remove H2.
## Common use cases 
-->

## <a name="next-steps"></a><span data-ttu-id="ac0fc-147">次の手順</span><span class="sxs-lookup"><span data-stu-id="ac0fc-147">Next steps</span></span>

- <span data-ttu-id="ac0fc-148">ユーザーが重要なタスクを再開できるようにするには、[アクティビティリソース](https://developer.microsoft.com/graph/docs/api-reference/beta/resources/projectrome_activity)を参照し、アプリのアクティビティを定義します。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-148">See the [activity resource](https://developer.microsoft.com/graph/docs/api-reference/beta/resources/projectrome_activity) and define your app's activities to help users resume important tasks.</span></span>
- <span data-ttu-id="ac0fc-149">アクティビティを**ポップ**するためのアイデアについては、[アダプティブカードサンプル](https://adaptivecards.io/samples/)サンプルを参照してください。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-149">Explore the [adaptive card samples](https://adaptivecards.io/samples/) samples for ideas to make your activities **pop**.</span></span>  
- <span data-ttu-id="ac0fc-150">[Graph エクスプローラー](https://developer.microsoft.com/graph/graph-explorer)で API をお試しください。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-150">Try the API in the [Graph Explorer](https://developer.microsoft.com/graph/graph-explorer).</span></span>

<span data-ttu-id="ac0fc-151">**その他のアイデアをお探しですか?**</span><span class="sxs-lookup"><span data-stu-id="ac0fc-151">**Looking for more ideas?**</span></span> 

- <span data-ttu-id="ac0fc-152">[Microsoft エクスペリエンスがアクティビティをどのように使用しているかを](https://channel9.msdn.com/events/Build/2017/B8108)確認します。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-152">See [how Microsoft experiences are using activities](https://channel9.msdn.com/events/Build/2017/B8108).</span></span>
- <span data-ttu-id="ac0fc-153">[アクティビティフィード API](https://channel9.msdn.com/Events/Windows/Windows-Developer-Day-Fall-Creators-Update/WinDev011)について説明し、中断した場所を選択します。</span><span class="sxs-lookup"><span data-stu-id="ac0fc-153">Learn about [the activity feed API and pick up where I left off](https://channel9.msdn.com/Events/Windows/Windows-Developer-Day-Fall-Creators-Update/WinDev011).</span></span>
